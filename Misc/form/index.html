<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>MLA</title>
  <meta name="description" content="Forms">
  <meta name="author" content="WTFranklin">

  <script type="text/javascript" src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
  
  <script type="text/javascript">
  
	var question = 0;
	var answers  = 0;
  
	$(document).ready(function()
	{
		addQuestion();
	});
  
	function validate() 
	{
	
		var questions     = "";
		var strAns        = "";
		var correctAnswer = "";
	
		for(var i = 0; i < question; i++)
		{
		
			questions += $("#question" + (i+1)).val() + "\n";
			for(var j = 0; j < answers; j++)
			{
				if($("#q" + (i+1) + "answer" + (j+1)).val() === '')
				{
					alert("Undefined, friend");
					continue;
				}
				strAns += $("#q" + (i+1) + "answer" + (j+1)).val() + "\n";
			}
			
			correctAnswer = $("input[name=ans" + (i+1) + "]:checked", "#quizform").val();
			alert("Question" + (i+1) + ":\n" + questions + "Answers:\n" + strAns + "\nCorrect answer is:\n" + correctAnswer);
			strAns = "";
		}
		
	}
	
	function addQuestion() 
	{
		question++;
		answers=0;
		answers++;
		$("#questions").append($("#questionTemplate").html());
		
		//change div containing question id
		var newId = "q" + question;
		$("#questions #change").attr("id", newId);
		
		//change name for textarea for unique name and id
		$("#" + newId + " textarea").attr("name", "question" + question);
		$("#" + newId + " textarea").attr("id", "question" + question);
		
		//change span id and span text
		$("#" + newId + " span").attr("id", "q" + question + "ans" + answers);
		$("#q" + question + "ans" + answers).html(answers + ". ");
		
		//change field name and id
		$("#" + newId + " input[type=text]").attr("id", "q" + question + "answer" + answers);
		$("#" + newId + " input[type=text]").attr("name", "q" + question + "answer" + answers);
		
		//change value for radio button
		$("#" + newId + " input[type=radio]").attr("value", "q" + question + "answer" + answers);
		$("#" + newId + " input[type=radio]").attr("name", "ans" + question);
	}
  
    function addAnswer() 
	{
		answers++;
		var field = '<p><span id="q' + question + 'ans' + answers + '">' + answers + '. </span><input id="q' + question + 'answer' + answers + '" type="text" name="q' + question + 'answer' + answers + '" />&nbsp;&nbsp;<label><input type="radio" name="ans' + question + '" value="q' + question + 'answer' + answers + '" />Select as correct answer.</label></p>';
		$("#q" + question + " #fields").append(field);
	}
  
	function startOver() 
	{
		var conf = confirm("Are you sure you want to start over? You will lose ALL progress!");
		if(conf)
		{
			document.location.reload();
		}
	}
  
  </script>
  
  <link rel="stylesheet" href="css/styles.css?v=1.0">

  <style type="text/css">
  
	#wrapper 
	{
		margin: 0 auto;
		width: 1000px;
	}
	
	#questionTemplate
	{
		display: none !important; /* don't want this to show ever! */
	}
	
	.table {
		display: table;
		margin: 10px;
	}
	
	.cell {
		display: table-cell;
		vertical-align: top;
	}
	
	.left-cell {
		width: 100px;
	}

	.right-cell {
		width: 500px;
	}
  
	p span {
		display: inline !important;
	}
	
	#fields {
	
	}
  
  </style>
  
  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>

<body>
	
	<div id="wrapper">
	
		<h1>Add Quiz</h1>
		
		<form id="quizform" name="quizform">
			
			<div id="buttons">
			
				<input type="button" value="Add Question" onclick="addQuestion();" />
				<input type="button" value="Add Answer" onclick="addAnswer();" />
				<input type="reset" value="Reset form" />
				<input type="button" value="Start Over" onclick="startOver();" />
				<input type="button" value="Submit Quiz" onclick="validate();" />
				
			</div>
			
			<div id="questions">
			
			
			</div>
			
		</form>
	
		<!-- copy from here to put extra fields into form! -->
		<div id="questionTemplate">
			
			<div id="change">
		
				<div class="table">
					<div class="cell left-cell">
						Question:
					</div>
					<div class="cell right-cell">
						<textarea rows="5" cols="40" id="question" name="question"></textarea>
					</div>
				</div>
			
				<div class="table">
					<div class="cell left-cell">Answers: </div>
					<div id="fields" class="cell right-cell">
						
						<p><span id=""></span><input type="text" id="" class="field" name="" />&nbsp;&nbsp;<label><input type="radio" name="ans" value="" />Select as correct answer.</label></p>
						
					</div>
				</div>
			
			</div>
		
		</div>
	
	</div>

</body>
</html>